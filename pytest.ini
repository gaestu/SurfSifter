[pytest]
testpaths = tests
markers =
    gui_live: tests requiring a live display environment
    gui_offscreen: tests using an offscreen Qt platform
    e01: tests requiring E01 forensic image files
    pyewf: tests using pyewf library
    unit: fast, isolated unit tests
    integration: tests that touch filesystem, subprocesses, or multiple modules
    e2e: end-to-end tests exercising full pipelines
    slow: tests that take a long time to run
    compat: legacy/backward-compatibility tests

# Suppress deprecation warnings from third-party dependencies
filterwarnings =
    ignore::DeprecationWarning:pydyf
    ignore::DeprecationWarning:weasyprint

# To run without GUI tests (recommended for CI/automated testing):
# poetry run pytest

# To run GUI tests (run each file separately to avoid Qt state conflicts):
# find tests/gui -name 'test_*.py' -exec poetry run pytest {} -m gui_offscreen \;

# Default behavior: Skip GUI tests (they must run in isolation)
# GUI tests crash when run together due to Qt/PySide6 state management issues
addopts = -m "not gui_offscreen and not gui_live and not slow and not compat"
