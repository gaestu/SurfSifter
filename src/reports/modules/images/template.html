{# Images Module Template #}
<div class="module-images">
    {% if title %}
    <h3 class="module-title">{{ title }}</h3>
    {% endif %}
    
    {% if images %}
    <div class="images-grid">
        {% for image in images %}
        <div class="image-card">
            <div class="image-thumbnail">
                {% if image.thumbnail_b64 %}
                <img src="{{ image.thumbnail_b64 }}" alt="{{ image.filename }}" />
                {% else %}
                <div class="no-thumbnail">üñºÔ∏è<br/>{{ t.no_preview | default('No Preview') }}</div>
                {% endif %}
            </div>
            <div class="image-info">
                {% if include_filename %}
                <div class="image-filename" title="{{ image.filename }}">{{ image.filename }}</div>
                {% endif %}
                {% if image.md5 %}
                <div class="image-hash" title="{{ t.md5 | default('MD5') }}: {{ image.md5 }}">
                    <span class="hash-label">{{ t.md5 | default('MD5') }}:</span> 
                    <span class="hash-value">{{ image.md5[:16] }}...</span>
                </div>
                {% endif %}
                {% if image.timestamp %}
                <div class="image-timestamp">{{ image.timestamp }}</div>
                {% endif %}
                {% if image.exif_display %}
                <div class="image-exif">
                    {% for exif_line in image.exif_display %}
                    <div class="exif-line">{{ exif_line }}</div>
                    {% endfor %}
                </div>
                {% endif %}
                {% if include_filepath and image.rel_path %}
                <div class="image-path" title="{{ image.rel_path }}">{{ image.rel_path }}</div>
                {% endif %}
                {% if include_url and image.urls %}
                <div class="image-urls">
                    {% for url in image.urls %}
                    <div class="image-url" title="{{ url }}">{{ url }}</div>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p class="empty-message">{{ t.no_images_found | default('No images found matching the filter criteria.') }}</p>
    {% endif %}
    
    {% if show_image_count and shown_count < total_count %}
    <p class="limit-note">
        {{ t.showing_x_of_y_images | default('Showing {shown} of {total} images') | replace('{shown}', shown_count|string) | replace('{total}', total_count|string) }}
    </p>
    {% endif %}
    
    {% if show_filter_info %}
    <p class="filter-info">
        <strong>{{ t.filter | default('Filter') }}:</strong> {{ filter_description }} 
        <span class="image-count">({{ total_count }} {{ t.images | default('images') }})</span>
    </p>
    {% endif %}
</div>

<style>
.module-images {
    margin: 1em 0;
}

.module-images .filter-info {
    margin-bottom: 1em;
    color: #555;
    font-size: 0.9em;
}

.module-images .image-count {
    color: #888;
}

.images-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
}

@media (min-width: 900px) {
    .images-grid {
        grid-template-columns: repeat(4, 1fr);
    }
}

@media print {
    .images-grid {
        grid-template-columns: repeat(3, 1fr);
    }
}

.image-card {
    border: 1px solid #ddd;
    border-radius: 4px;
    overflow: hidden;
    background: #fff;
    page-break-inside: avoid;
}

.image-thumbnail {
    width: 100%;
    height: 150px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #fff;
    overflow: hidden;
}

.image-thumbnail img {
    max-width: 100%;
    max-height: 150px;
    object-fit: contain;
}

.no-thumbnail {
    color: #999;
    text-align: center;
    font-size: 2em;
    line-height: 1.4;
}

.image-info {
    padding: 8px;
    font-size: 0.8em;
    border-top: 1px solid #eee;
}

.image-filename {
    font-weight: 600;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    margin-bottom: 4px;
}

.image-hash {
    color: #666;
    font-family: monospace;
    font-size: 0.85em;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.hash-label {
    color: #888;
}

.hash-value {
    color: #333;
}

.image-timestamp {
    color: #666;
    margin-top: 4px;
}

.image-exif {
    margin-top: 4px;
    padding-top: 4px;
    border-top: 1px solid #eee;
}

.exif-line {
    color: #777;
    font-size: 0.9em;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.image-path {
    margin-top: 4px;
    color: #888;
    font-size: 0.85em;
    word-break: break-all;
    max-height: 2.4em;
    overflow: hidden;
}

.image-urls {
    margin-top: 4px;
    padding-top: 4px;
    border-top: 1px solid #eee;
}

.image-url {
    color: #0066cc;
    font-size: 0.8em;
    word-break: break-all;
    max-height: 2.4em;
    overflow: hidden;
    margin-bottom: 2px;
}

.image-url:last-child {
    margin-bottom: 0;
}

.module-images .empty-message {
    text-align: center;
    color: #888;
    font-style: italic;
    padding: 40px 20px;
    background: #f9f9f9;
    border-radius: 4px;
}

.module-images .limit-note {
    text-align: left;
    color: #888;
    font-size: 0.75em;
    margin-top: 0.5em;
}

.module-images .module-title {
    margin-top: 0;
    margin-bottom: 0.75em;
    font-size: 1.2em;
    font-weight: 600;
    color: #333;
}
</style>
