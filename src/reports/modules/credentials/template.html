{# Credentials Report Module Template #}
{# Calculate colspan for URL row #}
{% set col_count = 2 + (1 if show_profile else 0) + (1 if show_password else 0) + (2 if show_dates else 0) %}
<div class="module-credentials">
    <table class="credentials-table">
        <thead>
            <tr>
                <th class="col-username">{{ t.username | default('Username') }}</th>
                <th class="col-browser">{{ t.browser | default('Browser') }}</th>
                {% if show_profile %}
                <th class="col-profile">{{ t.profile | default('Profile') }}</th>
                {% endif %}
                {% if show_password %}
                <th class="col-password">{{ t.password | default('Password') }}</th>
                {% endif %}
                {% if show_dates %}
                <th class="col-created">{{ t.created | default('Created') }}</th>
                <th class="col-last-used">{{ t.last_used | default('Last Used') }}</th>
                {% endif %}
            </tr>
        </thead>
        <tbody>
            {% for cred in credentials %}
            <tr class="data-row">
                <td class="col-username">{{ cred.username_value }}</td>
                <td class="col-browser">{{ cred.browser }}</td>
                {% if show_profile %}
                <td class="col-profile">{{ cred.profile }}</td>
                {% endif %}
                {% if show_password %}
                <td class="col-password">
                    {% if cred.has_password %}
                    <span class="password-stored">{{ t.stored | default('Stored') }}</span>
                    {% else %}
                    <span class="password-none">{{ t.none | default('None') }}</span>
                    {% endif %}
                </td>
                {% endif %}
                {% if show_dates %}
                <td class="col-created">{{ cred.date_created }}</td>
                <td class="col-last-used">{{ cred.date_last_used }}</td>
                {% endif %}
            </tr>
            <tr class="url-row">
                <td colspan="{{ col_count }}" class="col-origin">{{ cred.origin_url }}</td>
            </tr>
            {% else %}
            <tr>
                <td colspan="{{ col_count }}" class="empty-message">
                    {{ t.no_credentials_found | default('No credentials found matching the filter criteria.') }}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
    {% if show_filter_info %}
    <p class="filter-info">
        <strong>{{ t.filter | default('Filter') }}:</strong> {{ filter_description }} 
        <span class="count">({{ total_count }} {{ t.credentials | default('credentials') }})</span>
    </p>
    {% endif %}
</div>

<style>
.module-credentials {
    margin: 1em 0;
}

.module-credentials .filter-info {
    margin-top: 0.5em;
    color: #555;
    font-size: 0.9em;
}

.module-credentials .count {
    color: #888;
}

.credentials-table {
    width: 100%;
    max-width: 100%;
    border-collapse: collapse;
    font-size: 0.85em;
    table-layout: auto;
}

.credentials-table th,
.credentials-table td {
    border: 1px solid #ddd;
    padding: 4px 6px;
    text-align: left;
    vertical-align: top;
}

.credentials-table th {
    background-color: #f5f5f5;
    font-weight: 600;
    white-space: nowrap;
}

/* Data row - main credential info */
.credentials-table .data-row td {
    border-bottom: none;
    padding-bottom: 2px;
}

.credentials-table .data-row:hover,
.credentials-table .data-row:hover + .url-row {
    background-color: #f0f7ff;
}

/* URL row - below data row */
.credentials-table .url-row td {
    border-top: none;
    padding-top: 0;
    padding-bottom: 6px;
}

.credentials-table .url-row .col-origin {
    font-size: 0.9em;
    color: #666;
    word-break: break-all;
}

.credentials-table .url-row:hover,
.credentials-table .url-row:hover + .data-row {
    background-color: #f0f7ff;
}

/* Alternate row coloring (every other credential pair) */
.credentials-table tbody tr.data-row:nth-of-type(4n+1),
.credentials-table tbody tr.data-row:nth-of-type(4n+1) + .url-row {
    background-color: #fafafa;
}

.credentials-table .col-username {
    word-break: break-word;
    font-weight: 500;
}

.credentials-table .col-browser {
    text-align: center;
    white-space: nowrap;
}

.credentials-table .col-profile {
    white-space: nowrap;
}

.credentials-table .col-password {
    text-align: center;
    white-space: nowrap;
}

.credentials-table .col-created,
.credentials-table .col-last-used {
    white-space: nowrap;
    text-align: center;
}

.credentials-table .password-stored {
    color: #c00;
    font-weight: 500;
}

.credentials-table .password-none {
    color: #888;
}

.credentials-table .empty-message {
    text-align: center;
    color: #666;
    font-style: italic;
    padding: 1em;
    border-top: 1px solid #ddd;
}
</style>
