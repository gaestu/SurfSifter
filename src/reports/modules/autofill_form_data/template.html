{# Autofill Form Data Report Module Template #}
<div class="module-autofill-form-data">
    {% if show_title %}
    <h3 class="module-title">{{ t.autofill_form_data_title | default('Autofill Form Data') }}</h3>
    {% endif %}
    
    {% if show_description %}
    <p class="module-description">{{ t.autofill_form_data_description | default('Autofill data contains values that the browser automatically saved from web forms. This includes usernames, addresses, phone numbers, and other information the user entered on websites. The data shows which fields were filled, when they were first and last used.') }}</p>
    {% endif %}
    
    {% if domains %}
    {% for domain_data in domains %}
    <div class="domain-block">
        {% if group_by_domain %}
        <h4 class="domain-header">
            {% if domain_data.domain %}
            <span class="domain-url">{{ domain_data.domain }}</span>
            {% else %}
            <span class="domain-unknown">{{ t.autofill_no_domain | default('Unknown Domain') }}</span>
            {% endif %}
        </h4>
        {% endif %}
        
        {% if domain_data.entries %}
        <table class="autofill-table">
            <thead>
                <tr>
                    <th class="col-name">{{ t.field_name | default('Name') }}</th>
                    <th class="col-value">{{ t.value | default('Value') }}</th>
                    <th class="col-first-used">{{ t.first_used | default('First Used') }}</th>
                    <th class="col-last-used">{{ t.last_used | default('Last Used') }}</th>
                </tr>
            </thead>
            <tbody>
                {% for entry in domain_data.entries %}
                <tr>
                    <td class="col-name">{{ entry.name }}</td>
                    <td class="col-value">
                        <span class="value-text" title="{{ entry.value }}">
                            {%- if entry.value|length > 60 -%}
                                {{ entry.value[:57] }}...
                            {%- else -%}
                                {{ entry.value }}
                            {%- endif -%}
                        </span>
                    </td>
                    <td class="col-first-used"><span class="date-value">{{ entry.first_used }}</span></td>
                    <td class="col-last-used"><span class="date-value">{{ entry.last_used }}</span></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% endif %}
    </div>
    {% endfor %}
    
    {% if show_filter_info %}
    <p class="filter-info">
        <strong>{{ t.filter | default('Filter') }}:</strong> {{ filter_description }}
        <span class="count">({% if group_by_domain %}{{ total_domains }} {{ t.domains | default('domains') }}, {% endif %}{{ total_entries }} {{ t.entries | default('entries') }})</span>
    </p>
    {% endif %}
    
    {% else %}
    <p class="empty-message">{{ t.no_autofill_found | default('No autofill entries found matching the filter criteria.') }}</p>
    {% endif %}
</div>

<style>
.module-autofill-form-data {
    margin: 1em 0;
}

.module-autofill-form-data .filter-info {
    margin-top: 1em;
    color: #555;
    font-size: 0.9em;
}

.module-autofill-form-data .count {
    color: #888;
}

.module-autofill-form-data .empty-message {
    color: #666;
    font-style: italic;
    margin: 1em 0;
}

.module-title {
    margin: 0 0 0.5em 0;
    font-size: 1.1em;
    font-weight: 600;
    color: #333;
}

.domain-block {
    margin-bottom: 1.5em;
    page-break-inside: avoid;
}

.domain-header {
    margin: 0 0 0.3em 0;
    font-size: 0.95em;
    font-weight: normal;
    color: #333;
}

.domain-url {
    font-weight: 600;
    word-break: break-all;
    color: #1a0dab;
}

.domain-unknown {
    font-weight: 500;
    font-style: italic;
    color: #666;
}

.module-description {
    margin: 0 0 1em 0;
    color: #555;
    font-size: 0.9em;
    line-height: 1.4;
}

.autofill-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.85em;
    table-layout: fixed;
}

.autofill-table th,
.autofill-table td {
    border: 1px solid #ddd;
    padding: 4px 6px;
    text-align: left;
    vertical-align: top;
}

.autofill-table th {
    background-color: #f5f5f5;
    font-weight: 600;
    white-space: nowrap;
}

.autofill-table .col-name {
    width: 20%;
    word-break: break-word;
    font-weight: 500;
}

.autofill-table .col-value {
    width: 45%;
    word-break: break-all;
}

.autofill-table .value-text {
    font-family: inherit;
}

.autofill-table .col-first-used,
.autofill-table .col-last-used {
    width: 17.5%;
    text-align: center;
}

.autofill-table .date-value {
    display: inline-block;
    font-size: 0.85em;
    line-height: 1.3;
}

.autofill-table tbody tr:nth-child(even) {
    background-color: #fafafa;
}

.autofill-table tbody tr:hover {
    background-color: #f0f7ff;
}
</style>
