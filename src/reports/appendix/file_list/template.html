<style>
.appendix-file-list {
    width: 100%;
    border-collapse: collapse;
    table-layout: fixed;
}
.appendix-file-list th,
.appendix-file-list td {
    padding: 2px 4px;
    font-size: 0.85em;
    line-height: 1.2;
    word-break: break-all;
    overflow-wrap: break-word;
}
.appendix-file-list th {
    background-color: #f5f5f5;
    border: 1px solid #ddd;
    text-align: left;
    font-weight: 600;
    white-space: nowrap;
}
.appendix-file-list td {
    border: 1px solid #ddd;
    vertical-align: top;
}
.appendix-file-list .file-entry {
    border-bottom: none;
}
.appendix-file-list .file-details {
    border-top: none;
    background-color: #fafafa;
}
.appendix-file-list .path-cell {
    max-width: 100%;
}
.appendix-file-list .name-cell {
    font-weight: 500;
}
.appendix-file-list .ext-cell {
    white-space: nowrap;
    color: #666;
}
.appendix-file-list .size-cell {
    white-space: nowrap;
    text-align: right;
    color: #666;
}
.appendix-file-list .date-cell {
    white-space: nowrap;
    color: #666;
}
.appendix-file-list .deleted-badge {
    background-color: #dc3545;
    color: white;
    padding: 1px 4px;
    border-radius: 3px;
    font-size: 0.85em;
    margin-left: 4px;
}
.appendix-file-list .label {
    color: #888;
    font-size: 0.9em;
}
</style>

{% if total_count == 0 %}
<p class="text-muted">{{ t.no_files_found | default('No files found matching the filter criteria.') }}</p>
{% else %}
<table class="appendix-file-list">
    <thead>
        <tr>
            <th style="width: 40%;">{{ t.file_name | default('File Name') }}</th>
            <th style="width: 20%;">{{ t.created | default('Created') }}</th>
            <th style="width: 20%;">{{ t.modified | default('Modified') }}</th>
            <th style="width: 20%;">{{ t.accessed | default('Accessed') }}</th>
        </tr>
    </thead>
    <tbody>
        {% for file in files %}
        <tr class="file-entry">
            <td class="name-cell">
                {{ file.file_name }}
                {%- if file.deleted %}<span class="deleted-badge">{{ t.deleted | default('deleted') }}</span>{% endif %}
            </td>
            <td class="date-cell">{{ file.created_ts or '-' }}</td>
            <td class="date-cell">{{ file.modified_ts or '-' }}</td>
            <td class="date-cell">{{ file.accessed_ts or '-' }}</td>
        </tr>
        <tr class="file-details">
            <td colspan="4" class="path-cell">
                <span class="label">{{ t.path | default('Path') }}:</span> {{ file.file_path }}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<p class="text-muted" style="font-size: 0.85em; margin-bottom: 8px;">
    {{ total_count }} {{ t.files | default('files') }}
</p>
{% endif %}
