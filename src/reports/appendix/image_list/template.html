{# Appendix Image List Template #}
<style>
.appendix-images {
    margin: 0;
}

.appendix-images .image-count {
    font-size: 0.85em;
    color: #666;
    margin-bottom: 12px;
}

.appendix-images-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
}

@media print {
    .appendix-images-grid {
        grid-template-columns: repeat(3, 1fr);
    }
}

.appendix-image-card {
    border: 1px solid #ddd;
    border-radius: 4px;
    overflow: hidden;
    background: #fff;
    page-break-inside: avoid;
}

.appendix-image-thumbnail {
    width: 100%;
    height: 180px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #f5f5f5;
    overflow: hidden;
}

.appendix-image-thumbnail img {
    max-width: 100%;
    max-height: 180px;
    object-fit: contain;
}

.appendix-no-thumbnail {
    color: #999;
    text-align: center;
    font-size: 1.8em;
    line-height: 1.4;
}

.appendix-image-info {
    padding: 6px 8px;
    font-size: 0.75em;
    border-top: 1px solid #eee;
    line-height: 1.3;
}

.appendix-image-hash {
    color: #666;
    font-family: monospace;
    font-size: 0.9em;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.appendix-hash-label {
    color: #888;
}

.appendix-hash-value {
    color: #333;
}

.appendix-image-timestamp {
    color: #666;
}

.appendix-image-found-by {
    color: #666;
    margin-top: 3px;
}

.appendix-found-by-label {
    color: #888;
}

.appendix-found-by-value {
    color: #333;
}

.appendix-image-exif {
    margin-top: 3px;
    padding-top: 3px;
    border-top: 1px solid #eee;
}

.appendix-exif-line {
    color: #777;
    font-size: 0.9em;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.appendix-image-path {
    margin-top: 3px;
    color: #888;
    font-size: 0.85em;
    word-break: break-all;
    max-height: 2.4em;
    overflow: hidden;
}

.appendix-image-urls {
    margin-top: 3px;
    padding-top: 3px;
    border-top: 1px solid #eee;
}

.appendix-image-url {
    color: #0066cc;
    font-size: 0.85em;
    word-break: break-all;
    margin-bottom: 2px;
}

.appendix-image-url:last-child {
    margin-bottom: 0;
}

.appendix-images .empty-message {
    text-align: center;
    color: #888;
    font-style: italic;
    padding: 40px 20px;
    background: #f9f9f9;
    border-radius: 4px;
}
</style>

<div class="appendix-images">
{% if images %}
    <div class="appendix-images-grid">
        {% for image in images %}
        <div class="appendix-image-card">
            <div class="appendix-image-thumbnail">
                {% if image.thumbnail_src %}
                <img src="{{ image.thumbnail_src }}" alt="{{ image.filename }}" />
                {% else %}
                <div class="appendix-no-thumbnail">üñºÔ∏è<br/>{{ t.no_preview | default('No Preview') }}</div>
                {% endif %}
            </div>
            <div class="appendix-image-info">
                {% if image.md5 %}
                <div class="appendix-image-hash" title="{{ t.md5 | default('MD5') }}: {{ image.md5 }}">
                    <span class="appendix-hash-label">{{ t.md5 | default('MD5') }}:</span> 
                    <span class="appendix-hash-value">{{ image.md5 }}</span>
                </div>
                {% endif %}
                {% if image.timestamp %}
                <div class="appendix-image-timestamp">
                    <span class="appendix-hash-label">{{ image.timestamp_label | default(t.source_date | default('Source Date')) }}:</span>
                    {{ image.timestamp }}
                </div>
                {% endif %}
                {% if image.found_by %}
                <div class="appendix-image-found-by">
                    <span class="appendix-found-by-label">{{ t.found_by | default('Found by') }}:</span>
                    <span class="appendix-found-by-value">{{ image.found_by | join(', ') }}</span>
                </div>
                {% endif %}
                {% if image.exif_display %}
                <div class="appendix-image-exif">
                    {% for exif_line in image.exif_display %}
                    <div class="appendix-exif-line">{{ exif_line }}</div>
                    {% endfor %}
                </div>
                {% endif %}
                {% if include_filepath and image.rel_path %}
                <div class="appendix-image-path" title="{{ image.rel_path }}">{{ image.rel_path }}</div>
                {% endif %}
                {% if include_url and image.urls %}
                <div class="appendix-image-urls">
                    {% for url in image.urls %}
                    <div class="appendix-image-url">{{ url }}</div>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
    <p class="image-count">{{ total_count }} {{ t.images | default('images') }}</p>
{% else %}
    <p class="empty-message">{{ t.no_images_found | default('No images found matching the filter criteria.') }}</p>
{% endif %}
</div>
